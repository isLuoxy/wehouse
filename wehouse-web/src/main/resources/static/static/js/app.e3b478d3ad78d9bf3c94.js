webpackJsonp([5],{"2kQT":function(e,t){},C2LH:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("7+uW"),i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var r=n("VU/8")({name:"App"},i,!1,function(e){n("zhNV")},null,null).exports,a=n("/ocq"),s={name:"Header",props:["PageRolling"],data:function(){var e=this;return{headerNavStyle:"",loginDialogVisible:!1,RegisterDialogVisible:!1,labelPosition:"top",userLoginInfo:{name:"",password:""},userRegisterInfo:{phoneNumber:"",name:"",password:"",checkPass:"",VerificationCode:""},leftTime:"获取验证码",disableGetVerificationCode:!1,loginCheckRules:{name:[{validator:function(e,t,n){""===t?n(new Error("请输入用户名或手机号!")):n()},trigger:"blur"}],password:[{validator:function(e,t,n){""===t?n(new Error("请输入登录密码!")):n()},trigger:"blur"}]},registerCheckRules:{phoneNumber:[{validator:function(t,n,o){var i=e;if(!n)return o(new Error("手机号不能为空!"));setTimeout(function(){n.length<11||!/^(1[35789]\d{9})$/.test(n)?o(new Error("请输入正确的11位中国大陆手机号!")):i.$http.post("/check/"+n,i.$qs.stringify({userPhone:n}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){if(200!==e.data.errorCode)return o(new Error(e.data.errorMsg));o()}).catch(function(e){return o(new Error("检测手机号是否可用错误,请稍后重试!"))})},500)},trigger:"blur"}],VerificationCode:[{validator:function(e,t,n){""===t?n(new Error("请输入六位验证码!")):6!==t.length?n(new Error("请输入正确的六位验证码!")):n()},trigger:"blur"}],name:[{validator:function(t,n,o){var i=e;""===n?o(new Error("请输入用户名!")):setTimeout(function(){i.$http.post("/check/"+n,i.$qs.stringify({userName:n}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){if(200!==e.data.errorCode)return o(new Error(e.data.errorMsg));o()}).catch(function(e){return o(new Error("检测用户名是否可用错误,请稍后重试!"))})},500)},trigger:"blur"}],password:[{validator:function(e,t,n){""===t?n(new Error("请输入密码!")):setTimeout(function(){(t.length<6||-1===t.search(/[a-z|A-Z]/)||-1===t.search(/\d/)||-1===t.search(/[@#$]/))&&n(new Error("密码需六位以上,包含字母、数字及“@“、”#”、“$”中的一个")),n()},600)},trigger:"blur"}],checkPass:[{validator:function(t,n,o){""===n?o(new Error("请再次输入密码!")):n!==e.userRegisterInfo.password?o(new Error("两次输入密码不一致!")):o()},trigger:"blur"}]},isLogin:!1,userData:{userHead:"",userName:"麦田里的风",userPhone:"19927457507",studentAuthentication:!1},loginCookie:""}},watch:{PageRolling:function(e,t){this.headerNavStyle=0===e?"":"background: rgba(255,255,255,0.8);position: fixed;\ntop: 0;\nwidth: 100%;\nz-index: 999;"}},methods:{getVerificationCode:function(e){var t=this;t.$refs[e].validateField("phoneNumber",function(e){""===e&&(t.leftTime="发送中...",t.$http.get("/code",{params:{phone:t.userRegisterInfo.phoneNumber}}).then(function(e){if(200===e.data.errorCode){t.disableGetVerificationCode=!0;var n=60,o=setInterval(function(){n>0?t.leftTime="还剩"+n--+"秒":(t.leftTime="获取验证码",t.disableGetVerificationCode=!1,clearInterval(o))},1e3)}}).catch(function(e){console.log(e)}).then(function(){}))})},doLogin:function(e){var t=this,n=this;n.$refs[e].validate(function(e){if(e){n.loginDialogVisible=!1;var o=t.$loading({lock:!0,text:"Loading",background:"rgba(245,245,245,0.7)"});n.$http.post("/login",n.$qs.stringify({userName:n.userLoginInfo.name,userPassword:n.userLoginInfo.password}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){200===e.data.errorCode?(n.$cookie.set("token",e.data.data.token,{expires:"1h"}),n.$http.get("/i",{params:{Cookie:n.$cookie.get("token")}}).then(function(e){200===e.data.errorCode&&(n.userData=e.data.data,n.isLogin=!0,o.close())}).catch(function(e){console.log(e)}).then(function(){})):(o.close(),alert(e.data.errorMsg))}).catch(function(e){o.close(),alert(e)})}})},doRegister:function(e){var t=this,n=this;n.$refs[e].validate(function(e){if(!e)return!1;t.RegisterDialogVisible=!1;var o=t.$loading({lock:!0,text:"Loading",background:"rgba(245,245,245,0.7)"});n.$http.post("/register",n.$qs.stringify({userPhone:n.userRegisterInfo.phoneNumber,userName:n.userRegisterInfo.name,userPassword:n.userRegisterInfo.password}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){o.close(),console.log(e),200===e.data.errorCode?alert("注册成功"):(o.close(),alert(e.data.errorMsg))}).catch(function(e){o.close(),alert(e)})})},gotoRegister:function(){this.RegisterDialogVisible=!0,this.loginDialogVisible=!1},gotoLogin:function(){this.loginDialogVisible=!0,this.RegisterDialogVisible=!1},logout:function(){this.$cookie.delete("token"),this.userData="",this.isLogin=!1,this.$router.push("/reflushHome")}},created:function(){var e=this;null!==e.$cookie.get("token")&&e.$http.get("/i",{params:{Cookie:e.$cookie.get("token")}}).then(function(t){200===t.data.errorCode&&(e.userData=t.data.data,e.isLogin=!0)}).catch(function(e){console.log(e)}).then(function(){})},components:{}},l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-menu",{ref:"headerNav",staticClass:"el-container headerNav",style:e.headerNavStyle,attrs:{"default-active":"1",mode:"horizontal",router:!0,"active-text-color":"#FFA640"}},[n("el-menu-item",{staticClass:"el-col-1 el-col-push-1",attrs:{index:"0",route:"/"}},[e._v("这是一个LOGO")]),e._v(" "),n("el-menu-item",{staticClass:"el-col-1 el-col-push-19",attrs:{index:"1",route:"/"}},[e._v("首页")]),e._v(" "),n("el-menu-item",{staticClass:"el-col-1 el-col-push-19",attrs:{index:"2",route:"/404"}},[e._v("介绍")]),e._v(" "),e.isLogin?e._e():n("el-menu-item",{staticClass:"el-col-1 el-col-push-19",attrs:{index:"3",route:"/"},on:{click:function(t){e.loginDialogVisible=!0}}},[e._v("登录\n    ")]),e._v(" "),e.isLogin?e._e():n("el-menu-item",{staticClass:"el-col-1 el-col-push-19",attrs:{index:"4",route:"/"},on:{click:function(t){e.RegisterDialogVisible=!0}}},[e._v("注册\n    ")]),e._v(" "),e.isLogin?n("el-menu-item",{staticClass:"el-col-1 el-col-push-19",attrs:{index:"5",route:"/"},on:{click:function(t){return e.$router.push({path:"/user/"+e.userData.userPhone+"/"+e.userData.userName})}}},[e._v("\n      "+e._s(e.userData.userName)+"\n    ")]):e._e(),e._v(" "),e.isLogin?n("el-menu-item",{staticClass:"el-col-1 el-col-push-19",attrs:{index:"6",route:"/"},on:{click:e.logout}},[e._v("\n      退出\n    ")]):e._e()],1),e._v(" "),n("div",[n("el-dialog",{attrs:{title:"登录",visible:e.loginDialogVisible,center:"",width:"25%"},on:{"update:visible":function(t){e.loginDialogVisible=t}}},[n("p",{staticStyle:{"text-align":"center"}},[e._v("没有账号?去\n        "),n("el-link",{attrs:{type:"info"},on:{click:e.gotoRegister}},[e._v("注册")])],1),e._v(" "),n("el-form",{ref:"userLoginInfo",attrs:{model:e.userLoginInfo,"status-icon":"",rules:e.loginCheckRules,"label-position":e.labelPosition,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"手机号/用户名",prop:"name"}},[n("el-input",{model:{value:e.userLoginInfo.name,callback:function(t){e.$set(e.userLoginInfo,"name","string"==typeof t?t.trim():t)},expression:"userLoginInfo.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"密码",prop:"password"}},[n("el-input",{attrs:{type:"password"},model:{value:e.userLoginInfo.password,callback:function(t){e.$set(e.userLoginInfo,"password","string"==typeof t?t.trim():t)},expression:"userLoginInfo.password"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.loginDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.doLogin("userLoginInfo")}}},[e._v("登 陆")])],1)],1)],1),e._v(" "),n("div",[n("el-dialog",{attrs:{title:"注册",visible:e.RegisterDialogVisible,center:"",width:"35%"},on:{"update:visible":function(t){e.RegisterDialogVisible=t}}},[n("p",{staticStyle:{"text-align":"center"}},[e._v("已有账号?去\n        "),n("el-link",{attrs:{type:"info"},on:{click:e.gotoLogin}},[e._v("登陆")])],1),e._v(" "),n("el-form",{ref:"userRegisterInfo",attrs:{model:e.userRegisterInfo,"status-icon":"",rules:e.registerCheckRules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"手机号",prop:"phoneNumber"}},[n("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.userRegisterInfo.phoneNumber,callback:function(t){e.$set(e.userRegisterInfo,"phoneNumber","string"==typeof t?t.trim():t)},expression:"userRegisterInfo.phoneNumber"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"验证码",prop:"VerificationCode"}},[n("el-input",{attrs:{maxlength:"6","show-word-limit":"",clearable:""},model:{value:e.userRegisterInfo.VerificationCode,callback:function(t){e.$set(e.userRegisterInfo,"VerificationCode",e._n("string"==typeof t?t.trim():t))},expression:"userRegisterInfo.VerificationCode"}},[n("el-button",{attrs:{slot:"append",disabled:e.disableGetVerificationCode},on:{click:function(t){return e.getVerificationCode("userRegisterInfo")}},slot:"append"},[e._v("\n              "+e._s(e.leftTime)+"\n            ")])],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"用户名",prop:"name"}},[n("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.userRegisterInfo.name,callback:function(t){e.$set(e.userRegisterInfo,"name","string"==typeof t?t.trim():t)},expression:"userRegisterInfo.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"密码",prop:"password"}},[n("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.userRegisterInfo.password,callback:function(t){e.$set(e.userRegisterInfo,"password","string"==typeof t?t.trim():t)},expression:"userRegisterInfo.password"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[n("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.userRegisterInfo.checkPass,callback:function(t){e.$set(e.userRegisterInfo,"checkPass","string"==typeof t?t.trim():t)},expression:"userRegisterInfo.checkPass"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.RegisterDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.doRegister("userRegisterInfo")}}},[e._v("注 册")])],1)],1)],1)],1)},staticRenderFns:[]};var c=n("VU/8")(s,l,!1,function(e){n("2kQT")},"data-v-0167a5fc",null).exports,u={name:"home",data:function(){return{activeIndex:1,pageRolling:0,inputText:"",cityNames:[],value:"",zufangData:[{id:"001",name:"房屋名称",rentalType:"房屋出租方式",orientation:"房屋朝向",area:"房屋面积",price:"￥800/月",pictureUrl:"../../static/img/test_1.jpg"}],zufangDataLength:0,currentDate:new Date}},components:{Footer:n("TVmP").a,Header:c},methods:{scrollToTop:function(){this.pageRolling=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop}},mounted:function(){window.addEventListener("scroll",this.scrollToTop)},created:function(){var e=this;e.$http.get("/citys",{params:{}}).then(function(t){200===t.data.errorCode&&(e.cityNames=t.data.data)}).catch(function(e){console.log(e)}).then(function(){}),e.$http.get("/zufang",{params:{}}).then(function(t){200===t.data.errorCode&&(e.zufangData=t.data,e.zufangDataLength=t.data.length)}).catch(function(e){console.log(e)}).then(function(){})},filters:{timeFormater:function(e){return e.getFullYear()+"-"+(e.getMonth()+1).toString().padStart(2,"0")+"-"+e.getDate().toString().padStart(2,"0")}}},f={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Header",{attrs:{"page-rolling":e.pageRolling}}),e._v(" "),n("el-container",{staticStyle:{"text-align":"center"}},[n("div",{staticStyle:{"z-index":"-1",position:"relative",margin:"0 auto"}},[n("el-image",{staticStyle:{width:"100%",height:"100%",opacity:"0.9"},attrs:{src:"../../static/img/homeImg.jpg",fit:"fill"}})],1),e._v(" "),n("div",{staticStyle:{width:"100%","z-index":"999",position:"absolute"}},[n("el-input",{staticClass:"input-with-select",staticStyle:{width:"40%","margin-top":"10%"},attrs:{placeholder:"",type:"text",clearable:!0,size:"large"},model:{value:e.inputText,callback:function(t){e.inputText=t},expression:"inputText"}},[n("el-select",{attrs:{slot:"prepend",placeholder:"城市","popper-class":"selectOptions",filterable:""},slot:"prepend",model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.cityNames,function(e){return n("el-option",{key:e.cityId,attrs:{value:e.cityCnName}})}),1),e._v(" "),n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1)]),e._v(" "),n("br"),e._v(" "),n("el-container",{staticStyle:{display:"flex","flex-direction":"column"}},[n("p",{staticStyle:{"font-family":"DengXian_Reg,serif","font-weight":"bold","font-size":"xx-large","text-align":"center"}},[e._v("推荐房源")]),e._v(" "),e._l(parseInt(e.zufangDataLength/3)+1,function(t,o){return n("el-row",{key:t,staticClass:"row-bg",staticStyle:{"margin-top":"2%"},attrs:{type:"flex",justify:"center",align:"middle"}},e._l(3,function(t,o){return o<=e.zufangDataLength?n("el-col",{key:t,staticStyle:{"margin-left":"2%","margin-right":"2%"},attrs:{span:5}},[n("el-card",{attrs:{"body-style":{padding:"0px"}}},[n("img",{staticClass:"image",attrs:{src:e.zufangData[o].pictureUrl,alt:""}}),e._v(" "),n("div",{staticStyle:{padding:"14px"}},[n("span",[e._v(e._s(e.zufangData[o].name))]),e._v(" "),n("div",{staticClass:"bottom clearfix"},[n("time",{staticClass:"time"},[e._v(e._s(e.zufangData[o].price)),n("br")])])])])],1):e._e()}),1)})],2),e._v(" "),n("Footer")],1)},staticRenderFns:[]};var d=n("VU/8")(u,f,!1,function(e){n("dC1s")},null,null).exports,p={name:"test",data:function(){return{zufangData:[{id:"",name:"",rentalType:"",orientation:"",area:"",price:"",pictureUrl:""}]}},methods:{getCookie:function(){var e=JSON.parse('{\n\t"errorCode": "返回码，正确为200，错误则为对应的错误码",\n\t"errorMsg": "错误信息，返回正确时返回为空",\n\t"data": [\n\t\t{\n\t\t\t"id": "房屋标识id",\n\t\t\t"name": "房屋名称",\n\t\t\t"rentalType": "房屋出租方式",\n\t\t\t"orientation": "房屋朝向",\n\t\t\t"area": "房屋面积",\n\t\t\t"price": "房屋价格",\n\t\t\t"pictureUrl": "房屋展示图片url"\n\t\t}\n\t]\n}');console.log(e.data),this.zufangData=e.data,console.log(this.zufangData)}}},g={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._l(e.zufangData,function(t){return n("div",[e._v("\n    "+e._s(t.id)+"\n    "+e._s(t.name)+"\n    "+e._s(t.rentalType)+"\n    "+e._s(t.orientation)+"\n    "+e._s(t.area)+"\n    "+e._s(t.price)+"\n    "+e._s(t.pictureUrl)+"\n  ")])}),e._v(" "),n("button",{on:{click:e.getCookie}},[e._v("获取cookie")])],2)},staticRenderFns:[]};var m=n("VU/8")(p,g,!1,function(e){n("m5WR")},"data-v-51c3074c",null).exports;o.default.use(a.a);var h=[{path:"/test",name:"test",component:m,meta:{title:"test"}},{path:"/",name:"Home",component:d,meta:{title:"wehouse"}},{path:"/reflushHome",name:"reflushHome",component:function(){return n.e(0).then(n.bind(null,"MyhH"))},meta:{title:""}},{path:"/about",name:"about",component:function(){return n.e(1).then(n.bind(null,"vu9I"))},meta:{title:"关于wehouse"}},{path:"/user/:userPhone/:userName",name:"user",component:function(){return n.e(2).then(n.bind(null,"8pdO"))},meta:{title:""}},{path:"*",component:function(){return n.e(3).then(n.bind(null,"+H76"))},meta:{title:"找不到页面"}}],v=new a.a({mode:"history",base:Object({NODE_ENV:"production"}).BASE_URL,routes:h});v.beforeEach(function(e,t,n){e.path.match(/\/user\/\d{11}\/.*/)?window.document.title="wehouse | "+e.path.split("/")[3]:window.document.title=e.meta.title,n()});var b=v,_=(n("PoLO"),n("zL8q")),w=n.n(_),y=(n("C2LH"),n("mtWM")),k=n.n(y),x=n("Rf8U"),C=n.n(x),R=n("mw3O"),I=n.n(R),D=n("K/Lq"),$=n.n(D);o.default.config.productionTip=!1,o.default.prototype.$qs=I.a,o.default.use(C.a,k.a),o.default.use(w.a),o.default.use($.a),k.a.interceptors.request.use(function(e){return e},function(e){_.Message.error({message:"请求超时!"})}),new o.default({el:"#app",router:b,components:{App:r},template:"<App/>"})},PoLO:function(e,t){},TVmP:function(e,t,n){"use strict";var o={render:function(){var e=this.$createElement;return(this._self._c||e)("p",{staticClass:"mt-5 mb-3 text-muted"},[this._v("© 2020")])},staticRenderFns:[]};var i=n("VU/8")({name:"Footer"},o,!1,function(e){n("omzW")},"data-v-5075f0f2",null);t.a=i.exports},dC1s:function(e,t){},m5WR:function(e,t){},omzW:function(e,t){},zhNV:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.e3b478d3ad78d9bf3c94.js.map