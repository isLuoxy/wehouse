webpackJsonp([1],{ZpDA:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"userData",components:{Footer:a("TVmP").a},data:function(){return{indexText:"个人资料",activeLeft:"1",currentIndexOfUserInfo:1,loginCookie:"",userData:{userHead:"",userName:"",userPhone:"",studentAuthentication:""},houseCollectionLength:0,houseCollection:[],studentAuthenticationSteps:0,studentAuthenticationData:{school:"",schoolEmail:""}}},watch:{},methods:{handleSelect:function(t,e){this.currentIndexOfUserInfo=t},next:function(){var t=this,e=t.$loading({lock:!0,text:"Loading",background:"rgba(245,245,245,0.7)"});0===t.studentAuthenticationSteps?t.$http.post("/i/stuAuth/mail",{Cookie:t.$cookie.get("token"),school:t.studentAuthenticationData.school,schoolEmail:t.studentAuthenticationData.schoolEmail},{headers:{"Content-Type":"application/json"}}).then(function(a){e.close(),console.log(a),200===a.data.errorCode&&t.studentAuthenticationSteps++>2&&(t.studentAuthenticationSteps=0)}).catch(function(a){e.close(),t.$notify.error({title:"发送验证码失败",message:a})}):1===t.studentAuthenticationSteps?e.close():2===t.studentAuthenticationSteps&&t.$http.get("/i",{params:{Cookie:t.$cookie.get("token")}}).then(function(e){200===e.status&&(console.log(e.data.errorCode+"\t"+e.data.errorMessage),4103!==e.data.errorCode&&(t.userData=e.data.data,"Y"===t.userData.studentAuthentication&&(t.studentAuthenticationSteps=2),console.log(t.userData)))}).catch(function(t){console.log(t)}).then(function(){e.close()})},studentVerify:function(){},changeMenu:function(t,e){switch(t){default:case"1":this.indexText="个人资料";break;case"2":this.indexText="我的收藏";var a=this;a.$http.get("/i/collection",{params:{Cookie:a.$cookie.get("token")}}).then(function(t){console.log(t.data.errorCode+"\t"+t.data.errorMessage),t.data.data.length>0?(console.log(t.data.data),a.houseCollection=t.data.data):(a.houseCollection=[],a.houseCollectionLength=0)}).catch(function(t){alert(t)}).then(function(){});break;case"3":this.indexText="学生认证";break;case"4":this.indexText="账号设置"}},logOut:function(){var t=this;t.$http.get("/i/logout",{params:{Cookie:this.$cookie.get("token")}}).then(function(e){200===e.data.errorCode?(t.$notify.success({title:"注销成功",message:"您的账号已退出登录"}),t.$cookie.delete("token"),t.$cookie.delete("userData"),t.userData="",t.isLogin=!1):t.$notify.error({title:"注销失败",message:e.data.errorMessage})}).catch(function(t){console.log(t)}).then(function(){t.$router.push("/refreshIndex")})}},created:function(){var t=this;t.$cookie.get("token")?(t.loginCookie=t.$cookie.get("token"),t.$http.get("/i",{params:{Cookie:t.$cookie.get("token")}}).then(function(e){200===e.status&&(console.log(e.data.errorCode+"\t"+e.data.errorMessage),4103!==e.data.errorCode&&(t.userData=e.data.data,"Y"===t.userData.studentAuthentication&&(t.studentAuthenticationSteps=2),console.log(t.userData)))}).catch(function(t){console.log(t)}).then(function(){})):t.$router.push("/login")}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-page-header",{staticStyle:{"margin-left":"2vw","line-height":"70px"},attrs:{content:t.indexText},on:{back:function(e){return t.$router.push("/")}}}),t._v(" "),a("div",{staticStyle:{"margin-top":"1vh",width:"8.32vw",height:"10vh"}},[a("el-popconfirm",{attrs:{confirmButtonText:"退出",cancelButtonText:"取消",icon:"el-icon-info",iconColor:"red",title:"退出登录？"},on:{onConfirm:t.logOut}},[a("el-avatar",{attrs:{slot:"reference",src:"https://myblog-figure-bed-1258528016.cos.ap-guangzhou.myqcloud.com/%E5%85%B6%E4%BB%96/%E9%BB%91%E4%BA%BA%E6%8A%AC%E6%A3%BA.png"},slot:"reference"})],1),t._v(" "),a("p",[t._v(t._s(t.userData.userName))])],1),t._v(" "),a("div",[a("div",{staticClass:"menuBar el-col-2"},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":t.activeLeft},on:{select:t.changeMenu}},[a("el-menu-item",{attrs:{index:"1"}},[a("i",{staticClass:"el-icon-user"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("个人资料")])]),t._v(" "),a("el-menu-item",{attrs:{index:"2"}},[a("i",{staticClass:"el-icon-menu"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("我的收藏")])]),t._v(" "),a("el-menu-item",{attrs:{index:"3"}},[a("i",{staticClass:"el-icon-document"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("学生认证")])]),t._v(" "),a("el-menu-item",{attrs:{index:"4"}},[a("i",{staticClass:"el-icon-setting"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("账号设置")])])],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"个人资料"===t.indexText,expression:"indexText==='个人资料'"}]},[a("el-card",{staticClass:"box-card-person"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("\n                        "+t._s(t.userData.userName)+"\n                        "),a("el-tag",{directives:[{name:"show",rawName:"v-show",value:"N"===t.userData.studentAuthentication,expression:"userData.studentAuthentication==='N'"}],attrs:{type:"danger",size:"mini"}},[t._v("未学生认证")]),t._v(" "),a("el-tag",{directives:[{name:"show",rawName:"v-show",value:"Y"===t.userData.studentAuthentication,expression:"userData.studentAuthentication==='Y'"}],attrs:{type:"success"}},[t._v("学生认证")])],1),t._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:t.logOut}},[t._v("退出登录")])],1),t._v(" "),a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":"1",mode:"horizontal"},on:{select:t.handleSelect}},[a("el-menu-item",{attrs:{index:"1"}},[t._v("基本资料")]),t._v(" "),a("el-menu-item",{attrs:{index:"2"}},[t._v("修改头像")]),t._v(" "),a("el-menu-item",{attrs:{index:"3"}},[t._v("密码管理")])],1)],1),t._v(" "),t._m(0),t._v(" "),a("el-card",{directives:[{name:"show",rawName:"v-show",value:"1"===String(t.currentIndexOfUserInfo),expression:"String(currentIndexOfUserInfo)==='1'"}],staticClass:"box-card-person"},[a("div",{staticClass:"text item",staticStyle:{"text-align":"left"}},[t._v("\n                    用户名: "+t._s(t.userData.userName)),a("br"),t._v("\n                    手机号: "+t._s(t.userData.userPhone)),a("br")])])],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"我的收藏"===t.indexText,expression:"indexText==='我的收藏'"}]},[a("div",[a("p",{directives:[{name:"show",rawName:"v-show",value:0===t.houseCollectionLength,expression:"houseCollectionLength ===0"}]},[t._v("您还没有收藏哦,再多逛逛吧")]),t._v(" "),t._l(parseInt(t.houseCollectionLength/3)+1,function(e){return a("el-row",{key:e,staticClass:"row-bg",staticStyle:{"margin-top":"2%"},attrs:{type:"flex",justify:"center",align:"middle"}},t._l(3,function(e,s){return s<t.houseCollectionLength?a("el-col",{key:e,staticStyle:{"margin-left":"2%","margin-right":"2%"},attrs:{span:5}},[a("el-card",{attrs:{"body-style":{padding:"0px"}}},[a("img",{staticClass:"image hvr-grow",attrs:{src:"https://myblog-figure-bed-1258528016.cos.ap-guangzhou.myqcloud.com/%E5%85%B6%E4%BB%96/house.jpg",alt:"图片加载失败"}}),t._v(" "),a("div",{staticClass:"hvr-sweep-to-top",staticStyle:{"padding-top":"14px","padding-bottom":"14px",width:"100%","text-align":"center"}},[a("span",[t._v(t._s(t.houseCollection[s].name))]),t._v(" "),a("div",{staticClass:"bottom clearfix"},[a("time",{staticClass:"time"},[t._v(t._s(t.houseCollection[s].price)),a("br")])])])])],1):t._e()}),1)})],2)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"学生认证"===t.indexText,expression:"indexText==='学生认证'"}]},[a("el-card",{staticClass:"box-card-person"},[a("el-steps",{attrs:{active:t.studentAuthenticationSteps,"align-center":"","finish-status":"success"}},[a("el-step",{attrs:{title:"填写邮箱"}}),t._v(" "),a("el-step",{attrs:{title:"查看邮件"}}),t._v(" "),a("el-step",{attrs:{title:"认证结束"}})],1)],1),t._v(" "),t._m(1),t._v(" "),a("el-card",{staticClass:"box-card-person"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0===t.studentAuthenticationSteps,expression:"studentAuthenticationSteps===0"}],staticStyle:{width:"20vw","margin-top":"2vh"}},[a("el-input",{staticStyle:{width:"25vw","margin-left":"15vw"},attrs:{placeholder:"请输入学校名称"},model:{value:t.studentAuthenticationData.school,callback:function(e){t.$set(t.studentAuthenticationData,"school",e)},expression:"studentAuthenticationData.school"}}),t._v(" "),a("el-input",{staticStyle:{width:"25vw","margin-left":"15vw","margin-top":"2vh"},attrs:{placeholder:"请输入邮箱"},model:{value:t.studentAuthenticationData.schoolEmail,callback:function(e){t.$set(t.studentAuthenticationData,"schoolEmail",e)},expression:"studentAuthenticationData.schoolEmail"}})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.studentAuthenticationSteps,expression:"studentAuthenticationSteps===1"}]},[a("p",[t._v("请访问您填写的邮箱收到的邮件中的链接完成学生验证")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2===t.studentAuthenticationSteps,expression:"studentAuthenticationSteps===2"}]},[a("p",{directives:[{name:"show",rawName:"v-show",value:"Y"===t.userData.studentAuthentication,expression:"userData.studentAuthentication==='Y'"}]},[t._v("您已经完成了学生认证!")]),t._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:"N"===t.userData.studentAuthentication,expression:"userData.studentAuthentication==='N'"}]},[t._v("还没有完成学生认证哦!")])]),t._v(" "),a("el-button",{staticStyle:{"margin-top":"12px"},on:{click:t.next}},[t._v("下一步")])],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"账号设置"===t.indexText,expression:"indexText==='账号设置'"}]},[a("p",[t._v("这里什么都没有哦")])])]),t._v(" "),a("Footer")],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"line"},[e("br")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"line"},[e("br")])}]};var o=a("VU/8")(s,n,!1,function(t){a("q03+")},"data-v-f137c68a",null);e.default=o.exports},"q03+":function(t,e){}});
//# sourceMappingURL=1.0fbaa3100192e5ab7039.js.map